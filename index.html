<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vortex Bypasser</title>

  <!-- Use absolute path to avoid relative path mistakes -->
  <link rel="stylesheet" href="/styles.css" id="main-stylesheet" />

  <script>
    // CSS load diagnostics + auto-retry with cache-bust
    (function checkStylesheetLoaded() {
      const stylesheetHref = '/styles.css';
      const maxRetries = 3;
      let attempts = 0;

      // Helper: return computed background of body (rgb string)
      function bodyBg() {
        try {
          const bg = window.getComputedStyle(document.body).backgroundColor || '';
          return bg.replace(/\s/g, '');
        } catch (e) { return ''; }
      }

      // Try to determine if CSS applied (the default body background in your CSS is NOT pure white)
      function cssLooksApplied() {
        const bg = bodyBg();
        // If background is white or transparent, assume stylesheet not applied
        if (!bg) return false;
        if (bg === 'rgba(0,0,0,0)' || bg === 'transparent') return false;
        // rgb(10,14,39) etc. ‚Äî not white
        if (bg === 'rgb(255,255,255)' || bg === '#ffffff' || bg === 'white') return false;
        return true;
      }

      async function tryReload() {
        attempts++;
        const link = document.getElementById('main-stylesheet');
        if (link) link.remove();

        // create new link with cache-bust
        const newLink = document.createElement('link');
        newLink.rel = 'stylesheet';
        newLink.id = 'main-stylesheet';
        newLink.href = stylesheetHref + '?_cb=' + Date.now();
        document.head.appendChild(newLink);

        // wait a short while then check computed style
        await new Promise(r => setTimeout(r, 250));
        const applied = cssLooksApplied();
        if (applied) {
          console.info('[Vortex] styles.css loaded successfully (attempt ' + attempts + ').');
          // optional: remove diagnostic banner if you made one
          return;
        } else {
          console.warn('[Vortex] styles.css not applied after attempt', attempts);
          if (attempts < maxRetries) {
            // try again
            await tryReload();
          } else {
            // final failure: show debug instructions
            console.error('[Vortex] styles.css failed to load after ' + maxRetries + ' attempts. See Network tab for /styles.css (404 or 200 with wrong content-type).');
            // show visible message to user
            const banner = document.createElement('div');
            banner.style.position = 'fixed';
            banner.style.left = '12px';
            banner.style.right = '12px';
            banner.style.top = '12px';
            banner.style.zIndex = 99999;
            banner.style.padding = '10px 12px';
            banner.style.borderRadius = '8px';
            banner.style.background = '#ffebee';
            banner.style.color = '#b00020';
            banner.style.fontFamily = 'sans-serif';
            banner.style.fontSize = '13px';
            banner.textContent = 'Warning: styles.css failed to load ‚Äî check browser DevTools Network tab for /styles.css (404 or incorrect mime).';
            document.body.appendChild(banner);
            console.log('If you are using a framework (Next/React/Vite), ensure styles.css is in the public/ folder or included in the build output. Use /styles.css path.');
          }
        }
      }

      // Wait until DOM is painted so computed styles are meaningful
      window.addEventListener('load', () => {
        // small delay for CSS to apply
        setTimeout(async () => {
          if (cssLooksApplied()) {
            console.info('[Vortex] styles.css seems applied.');
            return;
          } else {
            console.warn('[Vortex] styles.css does not seem applied. Retrying with cache-bust...');
            await tryReload();
          }
        }, 120);
      });
    })();
  </script>
</head>
<body>
  <h1>üå™Ô∏è Vortex Bypasser</h1>

  <div class="container">
    <input id="urlInput" type="text" placeholder="Enter URL..." />

    <button id="bypassBtn">Bypass</button>

    <div class="toggle-container">
      <label class="switch">
        <input type="checkbox" id="autoRedirect" />
        <span class="slider"></span>
      </label>
      <p class="toggle-label">Auto Redirect</p>
    </div>

    <div class="result-box" id="resultBox">Result will appear here...</div>

    <div class="supported-box">
      <h3>Supported Links</h3>
      <ul>
        <li>https://work.ink</li>
        <li>https://linkvertise</li>
        <li>https://link-unlocker.com</li>
        <li>https://pandadevelopment.net</li>
        <li>https://keyrblx.com</li>
        <li>https://krnl.cat</li>
      </ul>
    </div>

    <div class="buttons">
      <a href="https://discord.gg/PCQvUSUEsE" target="_blank" class="btn">Join Discord</a>
      <a href="https://discord.com/oauth2/authorize?client_id=1355400268103290910" target="_blank" class="btn">Invite Bot</a>
    </div>

    <p class="footer">Powered by Trw.lat</p>
  </div>

  <!-- (Keep your existing app logic / bypass script here) -->
  <script>
    // minimal existing behavior restored so page runs even if styles missing
    document.getElementById('bypassBtn').addEventListener('click', () => {
      const result = document.getElementById('resultBox');
      result.textContent = 'Bypass clicked ‚Äî running...';
    });
  </script>

  <!-- Vercel Analytics (optional) -->
  <script defer src="https://cdn.vercel-insights.com/v1/script.analytics.js"></script>
  <script defer src="https://cdn.vercel-insights.com/v1/script.debug.js"></script>
</body>
</html>
